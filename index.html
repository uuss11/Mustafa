<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø´Ø®ØµÙŠ | Ù…ØµØ·ÙÙ‰</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.12/typed.min.js" defer></script>

    <style>
        :root {
            --font-family-main: 'Tajawal', 'Cairo', sans-serif;
            --color-white: #f0f0f0;
            --color-accent: #a8d8f0;
            --sidebar-width: 320px;
            --current-theme-bg: linear-gradient(135deg, #0a1f33, #8a2be2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            outline: none;
            -webkit-tap-highlight-color: transparent;
            cursor: none; /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù…Ø§ÙˆØ³ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙƒØ±ÙŠØ³ØªØ§Ù„ÙŠ */
        }

        body {
            width: 100%;
            height: 100vh;
            font-family: var(--font-family-main);
            color: var(--color-white);
            background: #0a1f33;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; /* Ù…Ù†Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠØ± Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
            position: relative;
        }

        #gradient-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -2;
        }

        /* --- Custom Cursor --- */
        .cursor-dot, .cursor-outline {
            position: fixed; top: 0; left: 0; transform: translate(-50%, -50%);
            border-radius: 50%; z-index: 9999; pointer-events: none;
        }
        .cursor-dot { width: 8px; height: 8px; background-color: white; box-shadow: 0 0 10px white; }
        .cursor-outline {
            width: 40px; height: 40px; border: 1px solid rgba(255, 255, 255, 0.5);
            background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(2px);
            transition: width 0.2s, height 0.2s, background-color 0.2s, border-color 0.2s;
        }
        body.hovering .cursor-outline {
            width: 60px; height: 60px; background: rgba(168, 216, 240, 0.15);
            border-color: var(--color-accent); box-shadow: 0 0 20px rgba(168, 216, 240, 0.3);
        }

        /* --- Liquid Glass Class --- */
        .liquid-glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-top: 1px solid rgba(255, 255, 255, 0.4);
            border-left: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
            position: relative; overflow: hidden; transition: all 0.4s ease;
        }
        .liquid-glass:hover { transform: translateY(-3px); background: rgba(255, 255, 255, 0.15); }

        /* --- Header Elements (Top Bar) --- */
        .header-controls {
            position: fixed;
            top: 0; left: 0; width: 100%;
            padding: 20px;
            display: flex; justify-content: space-between; align-items: flex-start;
            z-index: 1000; /* ÙÙˆÙ‚ ÙƒÙ„ Ø´ÙŠØ¡ */
            pointer-events: none; /* Ù„Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ù†Ù‚Ø± ØªØ­ØªÙ‡ ÙÙŠ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ÙØ§Ø±ØºØ© */
        }

        /* Weather Widget (Top Left) */
        .weather-widget {
            pointer-events: auto;
            display: flex; flex-direction: column; align-items: center; gap: 5px;
            padding: 10px 15px; border-radius: 16px;
            min-width: 90px;
        }
        .weather-icons { display: flex; align-items: center; gap: 8px; font-size: 1.3rem; }
        .main-icon { color: #FFD700; filter: drop-shadow(0 0 8px rgba(255, 215, 0, 0.6)); }
        .sub-icon { font-size: 0.9rem; color: #fff; opacity: 0.8; }
        .time-text { font-weight: 700; font-size: 0.9rem; letter-spacing: 1px; direction: ltr;}

        /* Menu Button (Top Right) */
        .menu-toggle {
            pointer-events: auto;
            width: 45px; height: 45px;
            display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 5px;
            border-radius: 12px; cursor: pointer;
        }
        .menu-toggle span { width: 24px; height: 2px; background: #fff; border-radius: 2px; transition: 0.3s; }
        .menu-toggle:hover span { background: var(--color-accent); box-shadow: 0 0 10px var(--color-accent); }

        /* --- Main Card --- */
        .vcard {
            width: 90%; max-width: 380px;
            padding: 100px 20px 30px; /* Ù…Ø³Ø§ÙØ© Ø¹Ù„ÙˆÙŠØ© Ù„Ù„ØµÙˆØ±Ø© */
            border-radius: 30px; text-align: center;
            position: relative; z-index: 10;
            margin-top: 0; /* Ø³Ù†Ø¶Ø¨Ø·Ù‡ ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
        }

        .profile-picture-wrapper {
            width: 130px; height: 130px; margin: -90px auto 15px; /* ÙŠØ±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© Ù„Ù„Ø£Ø¹Ù„Ù‰ */
            border-radius: 50%; padding: 5px;
            background: linear-gradient(135deg, rgba(255,255,255,0.2), transparent);
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
            position: relative; z-index: 20;
        }
        .profile-picture { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; border: 3px solid rgba(255,255,255,0.1); }

        .user-info .name { font-size: 1.6rem; font-weight: 900; margin-bottom: 5px; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .user-info .title { font-size: 0.95rem; color: var(--color-accent); min-height: 45px; font-weight: 700; line-height: 1.4; }

        .social-links { display: flex; justify-content: center; gap: 12px; margin-bottom: 20px; }
        .social-links a {
            width: 45px; height: 45px; display: flex; align-items: center; justify-content: center;
            border-radius: 50%; font-size: 1.3rem; color: #fff; text-decoration: none;
        }

        .action-buttons { display: flex; flex-direction: column; gap: 12px; }
        .action-btn {
            display: flex; align-items: center; justify-content: center; gap: 10px;
            padding: 14px; text-decoration: none; color: #fff; font-weight: 700;
            border-radius: 14px; font-size: 1rem;
        }
        .action-btn.primary { background: rgba(138, 43, 226, 0.25); border-color: rgba(138, 43, 226, 0.4); }
        .action-btn.primary:hover { background: rgba(138, 43, 226, 0.5); }

        .signature { margin-top: 20px; font-size: 0.7rem; opacity: 0.6; }

        /* --- Sidebar --- */
        .sidebar {
            position: fixed; top: 0; right: -100%; width: var(--sidebar-width); height: 100%;
            background: rgba(10, 20, 40, 0.9); backdrop-filter: blur(30px);
            z-index: 2000; transition: right 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            border-left: 1px solid rgba(255,255,255,0.1);
            display: flex; flex-direction: column; padding: 80px 20px 20px; overflow-y: auto;
        }
        .sidebar.active { right: 0; }
        .sidebar-section { margin-bottom: 25px; }
        .section-title { font-size: 1rem; color: var(--color-accent); margin-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; }
        
        /* Color Cards */
        .color-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; }
        .color-card {
            display: flex; align-items: center; padding: 8px; background: rgba(255,255,255,0.05);
            border-radius: 8px; cursor: pointer; border: 1px solid transparent;
        }
        .color-card.active { border-color: var(--color-accent); background: rgba(255,255,255,0.15); }
        .preview-box { width: 20px; height: 20px; border-radius: 4px; margin-left: 8px; flex-shrink: 0; }
        .color-info { font-size: 0.8rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }

        /* Toggle */
        .toggle-row { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.05); padding: 10px; border-radius: 8px; }
        .toggle-switch { position: relative; width: 40px; height: 22px; background: rgba(255,255,255,0.2); border-radius: 20px; cursor: pointer; transition: 0.3s; }
        .toggle-switch::after { content: ''; position: absolute; top: 2px; left: 2px; width: 18px; height: 18px; background: #fff; border-radius: 50%; transition: 0.3s; }
        .toggle-row.active .toggle-switch { background: var(--color-accent); }
        .toggle-row.active .toggle-switch::after { left: 20px; }

        /* QR Modal */
        .qr-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); backdrop-filter: blur(8px);
            display: flex; justify-content: center; align-items: center;
            z-index: 5000; opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
        }
        .qr-modal.open { opacity: 1; pointer-events: auto; }
        .qr-card {
            background: var(--current-theme-bg); padding: 25px; border-radius: 20px; text-align: center;
            border: 1px solid rgba(255,255,255,0.2); box-shadow: 0 20px 60px rgba(0,0,0,0.6);
            transform: scale(0.9); transition: transform 0.3s ease;
        }
        .qr-modal.open .qr-card { transform: scale(1); }
        .qr-image { width: 180px; height: 180px; border-radius: 10px; border: 4px solid rgba(255,255,255,0.8); margin-bottom: 15px; }
        .close-qr { padding: 8px 20px; background: rgba(255,255,255,0.25); border: none; color: #fff; border-radius: 20px; cursor: pointer; font-weight: bold; }

        /* Sparkles */
        .sparkles { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; display: none; }
        .sparkles.active { display: block; }
        .sparkle { position: absolute; width: 3px; height: 10px; border-radius: 50%; opacity: 0; animation: rise 8s linear infinite; }
        @keyframes rise { 0% { transform: translateY(0); opacity: 0; } 20% { opacity: 1; } 100% { transform: translateY(-100vh); opacity: 0; } }

        /* --- Mobile Optimization Fixes (Ù„ØªØµÙ„ÙŠØ­ Ø§Ù„ØªØ¯Ø§Ø®Ù„) --- */
        @media (max-width: 480px) {
            :root { --sidebar-width: 85%; }
            
            .header-controls { padding: 15px; }
            
            .menu-toggle { width: 40px; height: 40px; }
            .weather-widget { padding: 8px 12px; min-width: auto; }
            .weather-icons { font-size: 1.1rem; }
            .time-text { font-size: 0.8rem; }

            /* Ø¥Ø²Ø§Ø­Ø© Ø§Ù„ÙƒØ§Ø±Ø¯ Ù„Ù„Ø£Ø³ÙÙ„ Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… ØªØ¯Ø§Ø®Ù„Ù‡ Ù…Ø¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
            .vcard {
                margin-top: 60px; 
                width: 88%;
                padding: 90px 15px 25px;
            }
            
            .profile-picture-wrapper { width: 110px; height: 110px; margin: -80px auto 15px; }
            .user-info .name { font-size: 1.5rem; }
            .action-btn { padding: 12px; font-size: 0.95rem; }
        }
    </style>
</head>
<body>

    <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>

    <div class="header-controls">
        <div class="weather-widget liquid-glass">
            <div class="weather-icons">
                <i class="fas fa-sun main-icon" id="mainWeatherIcon"></i>
                <i class="fas fa-cloud sub-icon"></i> </div>
            <span class="time-text" id="timeText">--:--</span>
        </div>

        <div class="menu-toggle liquid-glass sound-hover" id="menuToggle">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>

    <div class="qr-modal" id="qrModal">
        <div class="qr-card">
            <h3 style="color:white; margin-bottom:10px; font-size:1.1rem;">Ø§Ù…Ø³Ø­ Ø§Ù„Ø±Ù…Ø² Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ©</h3>
            <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=https://t.me/Q911O" alt="QR Code" class="qr-image">
            <br>
            <button class="close-qr sound-hover" id="closeQr">Ø¥ØºÙ„Ø§Ù‚</button>
        </div>
    </div>

    <canvas id="gradient-canvas"></canvas>
    <div class="sparkles" id="sparkles"></div>

    <aside class="sidebar" id="sidebar">
        <div class="sidebar-section">
            <h3 class="section-title">Ø§Ù„ØªØ£Ø«ÙŠØ±Ø§Øª</h3>
            <div class="toggle-row sound-hover" id="sparklesToggle">
                <span>ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø´Ø±Ø§Ø±</span>
                <div class="toggle-switch"></div>
            </div>
        </div>

        <div class="sidebar-section">
            <h3 class="section-title">Ø§Ù„Ø«ÙŠÙ…Ø§Øª (Themes)</h3>
            <div class="color-grid" id="themeGrid"></div>
        </div>

        <div class="sidebar-section">
            <h3 class="section-title">Ù„ÙˆÙ† Ø§Ù„Ø´Ø±Ø§Ø±</h3>
            <div class="color-grid" id="sparkleGrid"></div>
        </div>
    </aside>

    <main>
        <section class="vcard liquid-glass" id="vcard">
            <figure class="profile-picture-wrapper">
                <img class="profile-picture" src="https://files.catbox.moe/e1dryd.jpg" alt="Mustafa">
            </figure>

            <header class="user-info">
                <h1 class="name">Ù…ØµØ·ÙÙ‰ | ğ‘´ğ’–ğ’”ğ’•ğ’‚ğ’‡ğ’‚ ğŸ”®</h1>
                <p class="title"><span id="typed-title"></span></p>
            </header>

            <nav class="social-links">
                <a href="https://t.me/Q911O" target="_blank" class="liquid-glass sound-hover"><i class="fab fa-telegram"></i></a>
                <a href="https://www.tiktok.com/@es8n?_t=ZS-8z4oc7pKsbM&_r=1" target="_blank" class="liquid-glass sound-hover"><i class="fab fa-tiktok"></i></a>
                <a href="https://youtube.com/@ees8n?si=0W7EEtfOzNeKCsqy" target="_blank" class="liquid-glass sound-hover"><i class="fab fa-youtube"></i></a>
            </nav>

            <footer class="action-buttons">
                <a class="action-btn primary liquid-glass sound-hover" href="https://t.me/Q911O" target="_blank">
                    <i class="fas fa-user-circle"></i> <span>Ø­Ø³Ø§Ø¨ÙŠ Ø§Ù„Ø´Ø®ØµÙŠ</span>
                </a>
                <a class="action-btn liquid-glass sound-hover" href="https://t.me/esb8g" target="_blank">
                    <i class="fas fa-satellite-dish"></i> <span>Ù‚Ù†Ø§ØªÙŠ Ø¹Ù„Ù‰ ØªÙ„ÙŠØ¬Ø±Ø§Ù…</span>
                </a>
                <a class="action-btn liquid-glass sound-hover" href="https://youtube.com/@ees8n?si=0W7EEtfOzNeKCsqy" target="_blank">
                    <i class="fab fa-youtube"></i> <span>Ù‚Ù†Ø§ØªÙŠ Ø¹Ù„Ù‰ ÙŠÙˆØªÙŠÙˆØ¨</span>
                </a>
                <button class="action-btn liquid-glass sound-hover" id="shareBtn">
                    <i class="fas fa-share-alt"></i> <span>Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù…Ù„Ù (QR)</span>
                </button>
            </footer>
            
            <div class="signature">
                Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© | Ù…ØµØ·ÙÙ‰ Â©2025
            </div>
        </section>
    </main>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        
        // --- Audio Setup ---
        const hoverSound = new Audio('hover.mp3');
        const clickSound = new Audio('click.mp3');
        const playSound = (sound) => { if(sound) { sound.currentTime=0; sound.play().catch(()=>{}); }};

        document.querySelectorAll('.sound-hover').forEach(el => {
            el.addEventListener('mouseenter', () => playSound(hoverSound));
            el.addEventListener('click', () => playSound(clickSound));
        });

        // --- Custom Cursor ---
        const cursorDot = document.querySelector('.cursor-dot');
        const cursorOutline = document.querySelector('.cursor-outline');
        window.addEventListener('mousemove', (e) => {
            cursorDot.style.left = `${e.clientX}px`;
            cursorDot.style.top = `${e.clientY}px`;
            cursorOutline.animate({ left: `${e.clientX}px`, top: `${e.clientY}px` }, { duration: 500, fill: "forwards" });
        });
        document.querySelectorAll('a, button, .liquid-glass').forEach(el => {
            el.addEventListener('mouseenter', () => document.body.classList.add('hovering'));
            el.addEventListener('mouseleave', () => document.body.classList.remove('hovering'));
        });

        // --- Weather Widget Logic ---
        const timeText = document.getElementById('timeText');
        const weatherIcon = document.getElementById('mainWeatherIcon');
        
        function updateTime() {
            const now = new Date();
            let hours = now.getHours();
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const ampm = hours >= 12 ? 'PM' : 'AM';
            const displayHours = hours % 12 || 12;
            timeText.textContent = `${displayHours}:${minutes} ${ampm}`;

            // Change icon based on time
            if (hours >= 6 && hours < 18) {
                weatherIcon.className = 'fas fa-sun main-icon';
                weatherIcon.style.color = '#FFD700';
            } else {
                weatherIcon.className = 'fas fa-moon main-icon';
                weatherIcon.style.color = '#FEFCD7';
            }
        }
        setInterval(updateTime, 1000);
        updateTime();

        // --- Configuration ---
        const themes = [
            { name: "Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ", css: "linear-gradient(135deg, #0a1f33, #8a2be2)", colors: [[10,31,51], [138,43,226], [26,63,117], [42,100,255]] },
            { name: "ØºØ±ÙˆØ¨ Ø§Ù„Ø´Ù…Ø³", css: "linear-gradient(135deg, #ff512f, #dd2476)", colors: [[255,81,47], [221,36,118], [255,160,0], [100,20,50]] },
            { name: "Ø·Ø¨ÙŠØ¹Ø© Ø®Ù„Ø§Ø¨Ø©", css: "linear-gradient(135deg, #11998e, #38ef7d)", colors: [[17,153,142], [56,239,125], [0,100,0], [20,50,20]] },
            { name: "Ø£Ø¹Ù…Ø§Ù‚ Ø§Ù„Ù…Ø­ÙŠØ·", css: "linear-gradient(135deg, #00c6ff, #0072ff)", colors: [[0,198,255], [0,114,255], [0,10,50], [0,100,200]] },
            { name: "Ø´ÙÙ‚ Ù‚Ø·Ø¨ÙŠ", css: "linear-gradient(135deg, #8E2DE2, #4A00E0)", colors: [[142,45,226], [74,0,224], [0,255,255], [20,0,80]] },
            { name: "ÙØ¶Ø§Ø¡ ÙˆØ§Ø³Ø¹", css: "linear-gradient(135deg, #24243e, #302b63, #0f0c29)", colors: [[36,36,62], [48,43,99], [15,12,41], [0,0,0]] },
            { name: "Ø£Ù†Ø§Ù‚Ø© Ø§Ù„Ø£Ø³ÙˆØ¯", css: "linear-gradient(135deg, #434343, #000000)", colors: [[67,67,67], [0,0,0], [100,100,100], [20,20,20]] },
            { name: "Ø°Ù‡Ø¨ÙŠ Ù…Ù„ÙƒÙŠ", css: "linear-gradient(135deg, #CAC531, #F3F9A7)", colors: [[202,197,49], [243,249,167], [218,165,32], [255,215,0]] },
            { name: "Ù†Ø§Ø± ÙˆØ¬Ù„ÙŠØ¯", css: "linear-gradient(135deg, #3a6186, #89253e)", colors: [[58,97,134], [137,37,62], [0,0,100], [100,0,0]] },
            { name: "Ø­Ù„ÙˆÙ‰ Ø§Ù„ØªÙˆØª", css: "linear-gradient(135deg, #DA4453, #89216B)", colors: [[218,68,83], [137,33,107], [255,100,150], [100,0,50]] },
            { name: "ØºØ§Ø¨Ø© Ù…Ø¸Ù„Ù…Ø©", css: "linear-gradient(135deg, #134E5E, #71B280)", colors: [[19,78,94], [113,178,128], [0,50,0], [50,100,50]] },
            { name: "Ø³Ø§ÙŠØ¨Ø± Ø¨Ø§Ù†Ùƒ", css: "linear-gradient(135deg, #f12711, #f5af19)", colors: [[241,39,17], [245,175,25], [255,0,100], [255,200,0]] }
        ];

        const sparklesData = [
            { name: "Ø³Ù…Ø§ÙˆÙŠ", color: "#a8d8f0" }, { name: "Ø£Ø¨ÙŠØ¶", color: "#ffffff" },
            { name: "Ø°Ù‡Ø¨ÙŠ", color: "#ffd700" }, { name: "Ø£Ø­Ù…Ø±", color: "#ff4500" },
            { name: "Ø£Ø³ÙˆØ¯ Ø­Ø§Ù„Ùƒ", color: "#000000" }, { name: "ÙˆØ±Ø¯ÙŠ", color: "#ff69b4" },
            { name: "Ø£Ø®Ø¶Ø± Ù†ÙŠÙˆÙ†", color: "#39ff14" }, { name: "Ø¨Ù†ÙØ³Ø¬ÙŠ", color: "#8a2be2" }
        ];

        // --- UI Rendering ---
        const themeGrid = document.getElementById('themeGrid');
        const sparkleGrid = document.getElementById('sparkleGrid');
        const root = document.documentElement;

        function renderOptions() {
            themes.forEach((t, i) => {
                const div = document.createElement('div');
                div.className = `color-card ${i===0?'active':''} sound-hover`;
                div.innerHTML = `<div class="preview-box" style="background:${t.css}"></div><span class="color-info">${t.name}</span>`;
                div.onclick = () => {
                    document.querySelectorAll('#themeGrid .color-card').forEach(c=>c.classList.remove('active'));
                    div.classList.add('active');
                    updateGradient(t.colors);
                    root.style.setProperty('--current-theme-bg', t.css);
                    playSound(clickSound);
                };
                themeGrid.appendChild(div);
            });

            sparklesData.forEach((s, i) => {
                const div = document.createElement('div');
                div.className = `color-card ${i===0?'active':''} sound-hover`;
                const shadow = s.color==='#000000' ? '0 0 5px #fff' : `0 0 5px ${s.color}`;
                div.innerHTML = `<div class="preview-box" style="background:${s.color}; box-shadow:${shadow}"></div><span class="color-info">${s.name}</span>`;
                div.onclick = () => {
                    document.querySelectorAll('#sparkleGrid .color-card').forEach(c=>c.classList.remove('active'));
                    div.classList.add('active');
                    currentSparkleColor = s.color;
                    playSound(clickSound);
                };
                sparkleGrid.appendChild(div);
            });
        }
        renderOptions();

        // --- Gradient Logic ---
        const canvas = document.getElementById('gradient-canvas');
        const ctx = canvas.getContext('2d');
        let currentColors = themes[0].colors;
        let step = 0;
        let colorIndices = [0, 1, 2, 3];

        function resizeCanvas() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function updateGradient(newColors) { currentColors = newColors; step = 0; }

        function drawGradient() {
            step += 0.002;
            if (step >= 1) {
                step %= 1;
                colorIndices[0] = colorIndices[1]; colorIndices[2] = colorIndices[3];
                colorIndices[1] = (colorIndices[1] + Math.floor(1 + Math.random() * (currentColors.length - 1))) % currentColors.length;
                colorIndices[3] = (colorIndices[3] + Math.floor(1 + Math.random() * (currentColors.length - 1))) % currentColors.length;
            }
            const c1 = currentColors[colorIndices[0]], c2 = currentColors[colorIndices[1]], c3 = currentColors[colorIndices[2]], c4 = currentColors[colorIndices[3]];
            const r1 = Math.round((1-step)*c1[0] + step*c2[0]), g1 = Math.round((1-step)*c1[1] + step*c2[1]), b1 = Math.round((1-step)*c1[2] + step*c2[2]);
            const r2 = Math.round((1-step)*c3[0] + step*c4[0]), g2 = Math.round((1-step)*c3[1] + step*c4[1]), b2 = Math.round((1-step)*c3[2] + step*c4[2]);
            
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, `rgb(${r1},${g1},${b1})`);
            gradient.addColorStop(1, `rgb(${r2},${g2},${b2})`);
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            requestAnimationFrame(drawGradient);
        }
        drawGradient();

        // --- Sparkles Logic ---
        const sparklesContainer = document.getElementById('sparkles');
        const sparklesToggle = document.getElementById('sparklesToggle');
        let sparkleInterval;
        let currentSparkleColor = sparklesData[0].color;

        function createSparkle() {
            const s = document.createElement('div'); s.className = 'sparkle';
            s.style.left = Math.random()*100+'vw'; s.style.background = currentSparkleColor;
            s.style.boxShadow = currentSparkleColor==='#000000' ? `0 0 8px rgba(0,0,0,0.8), 0 0 2px rgba(255,255,255,0.2)` : `0 0 8px ${currentSparkleColor}`;
            s.style.animationDuration = (Math.random()*3+2)+'s';
            sparklesContainer.appendChild(s); setTimeout(() => s.remove(), 5000);
        }

        sparklesToggle.onclick = () => {
            sparklesToggle.classList.toggle('active');
            if(sparklesToggle.classList.contains('active')) {
                sparklesContainer.classList.add('active');
                sparkleInterval = setInterval(createSparkle, 150);
            } else {
                sparklesContainer.classList.remove('active');
                clearInterval(sparkleInterval);
                sparklesContainer.innerHTML = '';
            }
            playSound(clickSound);
        };

        // --- Sidebar & Modal Logic ---
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');
        const qrModal = document.getElementById('qrModal');
        
        menuToggle.onclick = (e) => { e.stopPropagation(); sidebar.classList.toggle('active'); playSound(clickSound); };
        document.onclick = (e) => { if(!sidebar.contains(e.target) && e.target!==menuToggle) sidebar.classList.remove('active'); };
        
        document.getElementById('shareBtn').onclick = () => { qrModal.classList.add('open'); playSound(clickSound); };
        document.getElementById('closeQr').onclick = () => { qrModal.classList.remove('open'); playSound(clickSound); };
        qrModal.onclick = (e) => { if(e.target===qrModal) qrModal.classList.remove('open'); };

        // --- Typed.js ---
        new Typed("#typed-title", {
            strings: ["Ù…ØµÙ…Ù… Ø¬Ø±Ø§ÙÙŠÙƒ ÙˆÙ…ÙˆØ´Ù† Ø¬Ø±Ø§ÙÙŠÙƒ", "Ø®Ø¨Ø±Ø© ÙˆØ§Ø³Ø¹Ø© ÙÙŠ Ø¨Ø±Ø§Ù…Ø¬ Adobe"],
            typeSpeed: 40, backSpeed: 25, backDelay: 3000, startDelay: 500, loop: true, showCursor: true
        });
    });
    </script>
</body>
</html>
